<!DOCTYPE html>
<html>
<head>
  <title>Plane Shooter Game</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      touch-action: none;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
      background: #000;
    }
    #controls {
      position: fixed;
      bottom: 15%; /* raised higher */
      width: 100%;
      z-index: 10;
      display: flex;
      justify-content: space-between;
      padding: 10px 20px; /* horizontal padding */
      box-sizing: border-box;
      pointer-events: auto;
    }
    #movementButtons {
      display: flex;
      gap: 15px;
      flex: 1;
      max-width: 40%;
    }
    #movementButtons button {
      background: rgba(255,255,255,0.2);
      border: 1px solid #888;
      color: white;
      font-size: 48px; /* twice as big (was 24px) */
      padding: 40px;
      border-radius: 12px;
      cursor: pointer;
      flex: 1;
      user-select: none;
      touch-action: manipulation;
    }
    #shootBtn {
      background: rgba(255,255,255,0.2);
      border: 1px solid #888;
      color: white;
      font-size: 48px; /* twice as big */
      padding: 40px;
      border-radius: 12px;
      cursor: pointer;
      user-select: none;
      touch-action: manipulation;
      max-width: 25%;
      flex-shrink: 0;
    }
    #startButton, #restartButton {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.2);
      border: 1px solid #888;
      color: white;
      font-size: 28px;
      padding: 16px 32px;
      border-radius: 8px;
      cursor: pointer;
      z-index: 10;
      display: none;
      user-select: none;
      touch-action: manipulation;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<div id="controls">
  <div id="movementButtons">
    <button id="leftBtn">‚óÄÔ∏è</button>
    <button id="rightBtn">‚ñ∂Ô∏è</button>
  </div>
  <button id="shootBtn">üî´</button>
</div>

<button id="startButton">Start Game</button>
<button id="restartButton">Restart Game</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// Load images
const planeImg = new Image();
planeImg.src = "plane.png";

const enemyImg = new Image();
enemyImg.src = "enemy.png";

const bgImg = new Image();
bgImg.src = "background.png";

// Load sounds
const shootSound = new Audio("shoot.mp3");
const explosionSound = new Audio("explosion.mp3");

// Game state
let gameState = "start";

// Scale factors (15%)
let planeW = canvas.width * 0.15;
let planeH = canvas.width * 0.15;

// Player and game data
let plane = { x: canvas.width / 2 - planeW / 2, y: canvas.height - planeH - 40, w: planeW, h: planeH };
let bullets = [];
let enemies = [];
let score = 0;

// Buttons
const startButton = document.getElementById("startButton");
const restartButton = document.getElementById("restartButton");
const controls = document.getElementById("controls");

// Show Start button initially
startButton.style.display = "block";
controls.style.display = "none";
restartButton.style.display = "none";

// Start game button
startButton.addEventListener("click", () => {
  gameState = "playing";
  startButton.style.display = "none";
  controls.style.display = "flex";
});

// Restart game button
restartButton.addEventListener("click", () => {
  resetGame();
  gameState = "playing";
  restartButton.style.display = "none";
  controls.style.display = "flex";
});

// Keyboard controls
document.addEventListener("keydown", e => {
  if (gameState === "playing") {
    let step = canvas.width * 0.1;
    if (e.key === "ArrowLeft" && plane.x > 0) plane.x -= step;
    if (e.key === "ArrowRight" && plane.x < canvas.width - plane.w) plane.x += step;
    if (e.key === " " || e.key === "ArrowUp") shoot();
  }
});

// Mobile controls
document.getElementById("leftBtn").addEventListener("touchstart", e => {
  e.preventDefault(); // prevent scrolling
  if (gameState === "playing" && plane.x > 0) plane.x -= canvas.width * 0.1;
});
document.getElementById("rightBtn").addEventListener("touchstart", e => {
  e.preventDefault();
  if (gameState === "playing" && plane.x < canvas.width - plane.w) plane.x += canvas.width * 0.1;
});
document.getElementById("shootBtn").addEventListener("touchstart", e => {
  e.preventDefault();
  if (gameState === "playing") shoot();
});

function shoot() {
  bullets.push({ x: plane.x + plane.w / 2 - 2, y: plane.y });
  shootSound.pause();
  shootSound.currentTime = 0;
  shootSound.play().catch(err => console.log("Shoot sound error:", err));
}

function resetGame() {
  plane = { x: canvas.width / 2 - plane.w / 2, y: canvas.height - plane.h - 40, w: plane.w, h: plane.h };
  bullets = [];
  enemies = [];
  score = 0;
}

function drawBackground() {
  ctx.drawImage(bgImg, 0, 0, canvas.width, canvas.height);
}

function drawPlane() {
  ctx.drawImage(planeImg, plane.x, plane.y, plane.w, plane.h);
}

function drawBullets() {
  ctx.fillStyle = "red";
  bullets.forEach(b => {
    b.y -= canvas.height * 0.02;
    ctx.fillRect(b.x, b.y, 40, 100);
  });
  bullets = bullets.filter(b => b.y > -10);
}

function drawEnemies() {
  if (Math.random() < 0.02) {
    enemies.push({
      x: Math.random() * (canvas.width - planeW),
      y: -planeH
    });
  }
  enemies.forEach(e => {
    e.y += canvas.height * 0.005;
    ctx.drawImage(enemyImg, e.x, e.y, planeW, planeH);
  });
  enemies = enemies.filter(e => e.y < canvas.height + planeH);
}

function checkCollisions() {
  for (let i = enemies.length - 1; i >= 0; i--) {
    for (let j = bullets.length - 1; j >= 0; j--) {
      const e = enemies[i];
      const b = bullets[j];
      if (
        b.x < e.x + planeW &&
        b.x + 4 > e.x &&
        b.y < e.y + planeH &&
        b.y + 10 > e.y
      ) {
        enemies.splice(i, 1);
        bullets.splice(j, 1);
        score++;
        explosionSound.pause();
        explosionSound.currentTime = 0;
        explosionSound.play().catch(err => console.log("Explosion sound error:", err));
        break;
      }
    }
  }
}

function checkGameOver() {
  for (let e of enemies) {
    if (e.y + planeH >= plane.y) {
      gameState = "gameover";
      controls.style.display = "none";
      restartButton.style.display = "block";
    }
  }
}

function drawScore() {
  ctx.fillStyle = "white";
  ctx.font = "20px Arial";
  ctx.fillText("Score: " + score, 10, 30);
}

function drawStartScreen() {
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "white";
  ctx.font = "28px Arial";
  ctx.textAlign = "center";
  ctx.fillText("Arcade Plane Shooter", canvas.width / 2, canvas.height / 2);
}

function drawGameOver() {
  ctx.fillStyle = "rgba(0, 0, 0, 0.7)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "red";
  ctx.font = "32px Arial";
  ctx.textAlign = "center";
  ctx.fillText("Game Over", canvas.width / 2, canvas.height / 2 - 20);
  ctx.fillStyle = "white";
  ctx.font = "20px Arial";
  ctx.fillText("Score: " + score, canvas.width / 2, canvas.height / 2 + 20);
}

function gameLoop() {
  if (gameState === "start") {
    drawStartScreen();
  } else if (gameState === "playing") {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBackground();
    drawPlane();
    drawBullets();
    drawEnemies();
    checkCollisions();
    checkGameOver();
    drawScore();
  } else if (gameState === "gameover") {
    drawGameOver();
  }
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
